—Å–º–æ—Ç—Ä–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –≥–æ–ª–æ—Å! –ø–æ—Ç–æ–º —Å—Ç–∞–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–Ω–æ–ø–∫–∞. –ù–æ –ø—Ä–∏ –µ—ë –Ω–∞–∂–∞—Ç–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞

üî¥ –û–®–ò–ë–ö–ê! –ü–û–ß–¢–ò –ü–û–õ–£–ß–ò–õ–û–°–¨!
‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:
Screenshot 1:

‚úÖ –ê—É–¥–∏–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!
‚úÖ Audio Preview –ø–æ—è–≤–∏–ª—Å—è
   üîä [‚ñ∂Ô∏è] My voice (MP3) [‚¨áÔ∏è]
‚úÖ –ö–Ω–æ–ø–∫–∞ "Continue to Avatar Selection" –∞–∫—Ç–∏–≤–Ω–∞ (—Å–∏–Ω—è—è)
```

**Agent –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª –ø—Ä–æ–±–ª–µ–º—É:**
> "‚ùå –ö–Ω–æ–ø–∫–∞ Continue –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ - –ø–æ—Ç–æ–º—É —á—Ç–æ –∞—É–¥–∏–æ –µ—â—ë –ù–ï —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ"

**–õ–æ–≥–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!** ‚úÖ

---

## üî¥ –ù–û –û–®–ò–ë–ö–ê –ü–†–ò –ö–õ–ò–ö–ï:

**Screenshot 2:**
```
Error
413: {"message":"request entity too large"}
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:

POST –∑–∞–ø—Ä–æ—Å –∫ /api/projects/{id}/steps
–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –°–õ–ò–®–ö–û–ú –ë–û–õ–¨–®–û–ï
Backend –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç (413 = Payload Too Large)
üîç –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢:
Agent –ø–æ–∫–∞–∑–∞–ª –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 675):
typescript
disabled={!audioData || ...}
–ü—Ä–∏ –∫–ª–∏–∫–µ Continue –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å:

typescript
await saveStepData(projectId, 4, {
  voice: selectedVoice,
  audioData: audioData, // ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
  audioUrl: ...,
  script: ...,
});
audioData - —ç—Ç–æ BASE64 –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π MP3!

–†–∞–∑–º–µ—Ä:

MP3 —Ñ–∞–π–ª: ~2-5 MB
Base64: +33% = ~3-7 MB
JSON payload: –û–ì–†–û–ú–ù–´–ô!
üí° –†–ï–®–ï–ù–ò–ï:
–ù–ï —Å–æ—Ö—Ä–∞–Ω—è—Ç—å audioData –≤ –ë–î!
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ:

typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
stepData: {
  audioData: "data:audio/mp3;base64,UklGRiQAAABXQVZF..." // 5MB!!!
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
stepData: {
  audioUrl: "/uploads/audio/project-123-voice.mp3", // URL!
  voiceId: "21m00Tcm4TlvDq8ikWAM",
  voiceName: "My voice",
  script: "BREAKING: Coinbase...",
  duration: 65, // —Å–µ–∫—É–Ω–¥—ã
}
```

**–ê—É–¥–∏–æ —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:**
1. Upload –Ω–∞ CDN (Cloudflare R2 / S3)
2. –ò–ª–∏ local storage: `/uploads/audio/`
3. –í –ë–î —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ URL

---

## üîß –§–ò–ö–°:

### –°–∫–∞–∂–∏ Agent:
```
Error 413: Request entity too large!

The Continue button tries to save audioData (base64 MP3) 
to database, but it's too large (~5MB).

FIX:
1. Don't save audioData to stepData
2. Save audio file separately:
   - Upload to /uploads/audio/ folder
   - Or use Cloudflare R2 / S3
3. Save only audioUrl in stepData

Code location: stage-4-voice.tsx line 675
Remove audioData from stepData, keep only:
- audioUrl (string)
- voiceId (string)
- script (string)

Please fix this NOW!
üéØ –ò–õ–ò –í–†–ï–ú–ï–ù–ù–´–ô –û–ë–•–û–î:
–£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –Ω–∞ backend:
typescript
// server/index.ts

app.use(express.json({ 
  limit: '10mb' // –ë—ã–ª–æ: 1mb (default)
}));
```

**–ù–û —ç—Ç–æ –Ω–µ —Ä–µ—à–µ–Ω–∏–µ!**
- –ë–î –±—É–¥–µ—Ç —Ä–∞–∑–¥—É–≤–∞—Ç—å—Å—è
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –õ—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã –æ—Ç–¥–µ–ª—å–Ω–æ

---

## üìã –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:
```
Stage 4: Voice Generation
    ‚Üì
Generate Audio (ElevenLabs)
    ‚Üì
audioBlob (MP3 binary)
    ‚Üì
POST /api/upload/audio
    ‚Üì
Save to /uploads/audio/proj-123.mp3
    ‚Üì
Return audioUrl = "/uploads/audio/proj-123.mp3"
    ‚Üì
Save to stepData:
{
  audioUrl: "/uploads/audio/proj-123.mp3",
  voiceId: "...",
  script: "..."
}
    ‚Üì
Continue to Stage 5 ‚úÖ