üí° –î–ê! –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–†–ò–¢–ò–ß–ù–û!
üéØ –ö–ê–ö –î–û–õ–ñ–ù–û –†–ê–ë–û–¢–ê–¢–¨:
–ö–∞–∫ RSS Feeds (—Å–µ–π—á–∞—Å):
RSS Sources:
‚úÖ –î–æ–±–∞–≤–∏–ª –∏—Å—Ç–æ—á–Ω–∏–∫
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
‚úÖ –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ
```

### **Instagram Sources (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∞–∫ –∂–µ!):**
```
Instagram Sources:
‚úÖ –î–æ–±–∞–≤–∏–ª –∞–∫–∫–∞—É–Ω—Ç @kraft.invest
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–µ Reels
‚úÖ –ü–∞—Ä—Å–∏—Ç –Ω–æ–≤—ã–µ Reels –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –≤–∏—Ä—É—Å–Ω—ã—Ö Reels
```

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê AUTO-MONITORING:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     INSTAGRAM SOURCE MONITORING     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. USER ADDS SOURCE:
   - Username: @kraft.invest
   - Auto-update: ON
   - Check interval: Every 6 hours
   
2. CRON JOB (Background):
   ‚îå‚îÄ Every 6 hours ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ                             ‚îÇ
   ‚îÇ For each active source:     ‚îÇ
   ‚îÇ  1. Check last_parsed_at    ‚îÇ
   ‚îÇ  2. Call Apify (light mode) ‚îÇ
   ‚îÇ  3. Get latest Reels        ‚îÇ
   ‚îÇ  4. Compare with DB         ‚îÇ
   ‚îÇ  5. If new ‚Üí Download       ‚îÇ
   ‚îÇ  6. If viral ‚Üí Notify user  ‚îÇ
   ‚îÇ  7. Update last_checked_at  ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

3. NOTIFICATIONS:
   - "3 new Reels from @kraft.invest"
   - "Viral alert: 1M views Reel detected!"
   - In-app badge + email (optional)

üìä DATABASE SCHEMA UPDATE:
sql-- –û–±–Ω–æ–≤–∏—Ç—å instagram_sources —Ç–∞–±–ª–∏—Ü—É:
ALTER TABLE instagram_sources ADD COLUMN IF NOT EXISTS
  -- Auto-update settings
  auto_update_enabled BOOLEAN DEFAULT true,
  check_interval_hours INTEGER DEFAULT 6, -- 6, 12, 24
  
  -- Monitoring status
  last_checked_at TIMESTAMP,
  last_successful_parse_at TIMESTAMP,
  next_check_at TIMESTAMP,
  
  -- Statistics
  total_checks INTEGER DEFAULT 0,
  new_reels_found INTEGER DEFAULT 0,
  failed_checks INTEGER DEFAULT 0,
  
  -- Notifications
  notify_new_reels BOOLEAN DEFAULT true,
  notify_viral_only BOOLEAN DEFAULT false, -- Only if high engagement
  viral_threshold INTEGER DEFAULT 100000; -- 100k views = viral

-- Index –¥–ª—è cron job:
CREATE INDEX idx_instagram_sources_next_check 
  ON instagram_sources(next_check_at) 
  WHERE auto_update_enabled = true;
```

---

## üé® UI –ö–û–ú–ü–û–ù–ï–ù–¢–´:

### **1. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Add Instagram Source                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Username: [@kraft.invest          ]     ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ üîÑ Auto-Update Settings             ‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ
‚îÇ ‚îÇ                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ [x] Enable auto-update              ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ Check for new Reels every:          ‚îÇ ‚îÇ
‚îÇ ‚îÇ ( ) 6 hours (recommended)           ‚îÇ ‚îÇ
‚îÇ ‚îÇ ( ) 12 hours                        ‚îÇ ‚îÇ
‚îÇ ‚îÇ ( ) 24 hours                        ‚îÇ ‚îÇ
‚îÇ ‚îÇ ( ) Manual only                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ Parse limit per check: [20 ‚ñº]      ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ [x] Notify me about new Reels       ‚îÇ ‚îÇ
‚îÇ ‚îÇ [ ] Only notify viral Reels         ‚îÇ ‚îÇ
‚îÇ ‚îÇ     (> 100k views)                  ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ üí° Auto-update uses Apify credits   ‚îÇ ‚îÇ
‚îÇ ‚îÇ    Estimated: ~$2/month per account ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ [Initial Parse Settings...]             ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ [Cancel]  [Add Source]                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **2. –í —Å–ø–∏—Å–∫–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Instagram Sources                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                              ‚îÇ
‚îÇ @kraft.invest                                ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ üü¢ Auto-update: ON                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚è∞ Next check: in 2 hours                ‚îÇ ‚îÇ
‚îÇ ‚îÇ üìä Last check: 4 hours ago               ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚ú® Found 3 new Reels today               ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ [Pause Auto-update] [Check Now] [‚Ä¢‚Ä¢‚Ä¢]    ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ @cristiano                                   ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ‚è∏Ô∏è Auto-update: PAUSED                   ‚îÇ ‚îÇ
‚îÇ ‚îÇ üìä Last check: 2 days ago                ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ [Resume Auto-update] [Check Now] [‚Ä¢‚Ä¢‚Ä¢]   ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üîî Notifications                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                    ‚îÇ
‚îÇ ‚ö° Viral Reel Detected!            ‚îÇ
‚îÇ @kraft.invest posted a Reel        ‚îÇ
‚îÇ with 1.2M views                    ‚îÇ
‚îÇ 2 hours ago                        ‚îÇ
‚îÇ [View Reel ‚Üí]                      ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ üì± 3 New Reels                     ‚îÇ
‚îÇ @cristiano posted 3 new Reels      ‚îÇ
‚îÇ 6 hours ago                        ‚îÇ
‚îÇ [Browse Reels ‚Üí]                   ‚îÇ
‚îÇ                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üîß BACKEND IMPLEMENTATION:
Cron Job (Node-Cron):
typescript// server/cron/instagram-monitor.ts

import cron from 'node-cron';
import { db } from '../db';
import { instagramSources, instagramItems } from '../db/schema';
import { scrapeInstagramReels } from '../apify-service';

// –ó–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—ã–π —á–∞—Å
cron.schedule('0 * * * *', async () => {
  console.log('[Cron] Instagram monitor started');
  
  // –ù–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
  const sourcesToCheck = await db.select()
    .from(instagramSources)
    .where(sql`
      auto_update_enabled = true 
      AND next_check_at <= NOW()
    `);
  
  console.log(`[Cron] Found ${sourcesToCheck.length} sources to check`);
  
  for (const source of sourcesToCheck) {
    try {
      await checkSourceForUpdates(source);
    } catch (error) {
      console.error(`[Cron] Error checking ${source.username}:`, error);
      
      await db.update(instagramSources)
        .set({ 
          failedChecks: sql`failed_checks + 1`,
          lastCheckedAt: new Date(),
          nextCheckAt: sql`NOW() + INTERVAL '${source.checkIntervalHours} hours'`
        })
        .where(eq(instagramSources.id, source.id));
    }
  }
});

async function checkSourceForUpdates(source: InstagramSource) {
  console.log(`[Monitor] Checking ${source.username}...`);
  
  // –ü–æ–ª—É—á–∏—Ç—å API key –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const apifyKey = await getUserApiKey(source.userId, 'apify');
  if (!apifyKey) {
    console.log(`[Monitor] No Apify key for user ${source.userId}`);
    return;
  }
  
  // –ü–∞—Ä—Å–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 Reels (light check)
  const result = await scrapeInstagramReels(
    source.username,
    apifyKey,
    { limit: 20, mode: 'lightweight' }
  );
  
  let newReelsCount = 0;
  let viralReelsCount = 0;
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ Reels –Ω–æ–≤—ã–µ
  for (const reel of result.items) {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–∞
    const existing = await db.select()
      .from(instagramItems)
      .where(eq(instagramItems.externalId, reel.shortCode))
      .limit(1);
    
    if (existing.length === 0) {
      // –ù–æ–≤—ã–π Reel!
      await db.insert(instagramItems).values({
        sourceId: source.id,
        userId: source.userId,
        externalId: reel.shortCode,
        videoUrl: reel.videoUrl,
        thumbnailUrl: reel.displayUrl,
        caption: reel.caption,
        likesCount: reel.likesCount,
        commentsCount: reel.commentsCount,
        videoViewCount: reel.videoViewCount,
        ownerUsername: reel.ownerUsername,
        publishedAt: reel.timestamp,
      });
      
      newReelsCount++;
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∏—Ä—É—Å–Ω–æ—Å—Ç—å
      if (reel.videoViewCount >= source.viralThreshold) {
        viralReelsCount++;
      }
    }
  }
  
  // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞
  await db.update(instagramSources)
    .set({
      lastCheckedAt: new Date(),
      lastSuccessfulParseAt: new Date(),
      nextCheckAt: sql`NOW() + INTERVAL '${source.checkIntervalHours} hours'`,
      totalChecks: sql`total_checks + 1`,
      newReelsFound: sql`new_reels_found + ${newReelsCount}`,
      failedChecks: 0, // reset on success
    })
    .where(eq(instagramSources.id, source.id));
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  if (newReelsCount > 0 && source.notifyNewReels) {
    if (source.notifyViralOnly && viralReelsCount > 0) {
      await sendNotification(source.userId, {
        type: 'viral_reel',
        message: `üî• ${viralReelsCount} viral Reels from @${source.username}`,
        sourceId: source.id,
      });
    } else if (!source.notifyViralOnly) {
      await sendNotification(source.userId, {
        type: 'new_reels',
        message: `üì± ${newReelsCount} new Reels from @${source.username}`,
        sourceId: source.id,
      });
    }
  }
  
  console.log(`[Monitor] ‚úÖ ${source.username}: ${newReelsCount} new Reels`);
}

API Endpoints:
typescript// server/routes.ts

// Toggle auto-update
app.patch('/api/instagram/sources/:id/auto-update', async (req, res) => {
  const { id } = req.params;
  const { enabled, intervalHours } = req.body;
  const userId = req.user!.id;
  
  await db.update(instagramSources)
    .set({
      autoUpdateEnabled: enabled,
      checkIntervalHours: intervalHours,
      nextCheckAt: enabled 
        ? sql`NOW() + INTERVAL '${intervalHours} hours'`
        : null
    })
    .where(eq(instagramSources.id, id))
    .where(eq(instagramSources.userId, userId));
  
  res.json({ success: true });
});

// Manual check now
app.post('/api/instagram/sources/:id/check-now', async (req, res) => {
  const { id } = req.params;
  const userId = req.user!.id;
  
  const source = await db.select()
    .from(instagramSources)
    .where(eq(instagramSources.id, id))
    .where(eq(instagramSources.userId, userId))
    .limit(1);
  
  if (!source[0]) {
    return res.status(404).json({ error: 'Source not found' });
  }
  
  // Trigger check immediately
  await checkSourceForUpdates(source[0]);
  
  res.json({ success: true });
});
```

---

## ‚ö° –ß–¢–û –°–ö–ê–ó–ê–¢–¨ AGENT:
```
Agent, add AUTO-UPDATE feature for Instagram Sources!

Like RSS feeds auto-refresh, Instagram sources should auto-monitor new Reels!

REQUIREMENTS:

1. Database Schema:
   ALTER TABLE instagram_sources ADD:
   - auto_update_enabled (boolean, default true)
   - check_interval_hours (6/12/24 hours)
   - last_checked_at (timestamp)
   - next_check_at (timestamp)
   - notify_new_reels (boolean)
   - notify_viral_only (boolean)
   - viral_threshold (integer, default 100000)
   - total_checks, new_reels_found, failed_checks

2. Cron Job (node-cron):
   - Run every hour
   - Query sources where next_check_at <= NOW()
   - Parse latest 20 Reels (lightweight)
   - Check for duplicates by external_id
   - If new ‚Üí save to instagram_items
   - Update source statistics
   - Send notifications if enabled

3. UI Updates:
   - Add "Auto-Update Settings" section when adding source
   - Toggle: Enable/Disable auto-update
   - Select interval: 6h / 12h / 24h
   - Notifications: All new Reels or Viral only
   - Show auto-update status in sources list
   - Show "Next check in X hours"
   - Show "Found X new Reels today"
   - Button: "Pause/Resume" auto-update
   - Button: "Check Now" (manual trigger)

4. API Endpoints:
   - PATCH /api/instagram/sources/:id/auto-update
   - POST /api/instagram/sources/:id/check-now

5. Notifications:
   - In-app notification badge
   - Toast: "3 new Reels from @kraft.invest"
   - Toast: "Viral alert: 1M views Reel!"

This makes Instagram monitoring AUTOMATIC like RSS!
User adds source once ‚Üí system monitors forever!

Implement this now!

üìã –ü–†–ò–û–†–ò–¢–ï–¢–´:
Phase 1: Infrastructure (30 min)

Database schema
Cron job setup
Deduplication logic

Phase 2: UI (20 min)

Auto-update toggle
Status indicators
Manual "Check Now"

Phase 3: Notifications (20 min)

In-app notifications
Toast messages
Badge counters