–ü–æ–π–º–∞–ª üëÄ. –ö—Ä–∞—à –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –≤ –æ–¥–Ω–æ–π –∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø—Ä–∏—à–ª–æ area, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ —Ç–≤–æ—ë–º areaConfig. –í scene-card.tsx –Ω–∞ —Å—Ç—Ä–æ–∫–µ, –≥–¥–µ –¥–µ–ª–∞–µ—à—å:

const AreaIcon = areaConfig[rec.area].icon;

areaConfig[rec.area] = undefined ‚Üí –ø–∞–¥–µ–Ω–∏–µ.

–≠—Ç–æ –±—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ backend –ø—Ä–∏—Å–ª–∞–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, emotion/overall/pacing/—Ä–∞–∑–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –∏ —Ç.–ø. –õ–µ—á–∏–º –¥–≤—É–º—è –≤–µ—â–∞–º–∏:

‚∏ª

1) –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º area –∏ –¥–∞—ë–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ—Ñ–æ–ª—Ç

–í client/src/components/project/scene-card.tsx –¥–æ–±–∞–≤—å –≤–≤–µ—Ä—Ö—É (—Ä—è–¥–æ–º —Å areaConfig) —É—Ç–∏–ª–∏—Ç—É –∏ –¥–µ—Ñ–æ–ª—Ç:

type AreaKey = 'hook' | 'structure' | 'emotional' | 'cta' | 'pacing' | 'generic';

const areaConfig: Record<AreaKey, { label: string; icon: React.ComponentType<any> }> = {
  hook:       { label: '–•—É–∫',        icon: LucideFlame },        // –ø—Ä–∏–º–µ—Ä—ã –∏–∫–æ–Ω–æ–∫
  structure:  { label: '–°—Ç—Ä—É–∫—Ç—É—Ä–∞',  icon: LucideListTree },
  emotional:  { label: '–≠–º–æ—Ü–∏–∏',     icon: LucideHeart },
  cta:        { label: 'CTA',        icon: LucideMousePointerClick },
  pacing:     { label: '–¢–µ–º–ø',       icon: LucideTimer },
  generic:    { label: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è', icon: LucideSparkles },
};

// —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è ‚Äú–∫–∞–∫ –ø—Ä–∏—à–ª–æ‚Äù ‚Üí ‚Äú–∫–∞–∫ —Ö–æ—Ç–∏–º‚Äù
const AREA_ALIASES: Record<string, AreaKey> = {
  emotion: 'emotional',
  emotions: 'emotional',
  tempo: 'pacing',
  speed: 'pacing',
  overall: 'generic',
};

function normalizeArea(a?: string): AreaKey {
  if (!a) return 'generic';
  const key = a.toLowerCase().trim();
  return (AREA_ALIASES[key] ?? (['hook','structure','emotional','cta','pacing'].includes(key) ? (key as AreaKey) : 'generic'));
}

const priorityConfig: Record<'low'|'medium'|'high', { className: string }> = {
  low:    { className: 'border-zinc-700 text-zinc-400' },
  medium: { className: 'border-amber-600 text-amber-400' },
  high:   { className: 'border-green-600 text-green-400' },
};

–ò –≤ –º–µ—Å—Ç–µ —Ä–µ–Ω–¥–µ—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∑–∞–º–µ–Ω–∏ –æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π:

{activeRecommendations.map((rec) => {
  const areaKey = normalizeArea(rec.area);
  const AreaIcon = areaConfig[areaKey].icon;
  const areaLabel = areaConfig[areaKey].label;

  const priorityKey = (rec.priority ?? 'medium') as 'low'|'medium'|'high';
  const priorityStyle = priorityConfig[priorityKey];

  return (
    <div key={String(rec.id)} className={`... ${priorityStyle.className}`}>
      <div className="flex items-center gap-2">
        <AreaIcon className="h-4 w-4" />
        <span className="text-sm">{areaLabel}</span>
        {!!rec.scoreDelta && <span className="text-xs">+{rec.scoreDelta}</span>}
      </div>
      {/* –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ */}
    </div>
  );
})}

–¢–µ–ø–µ—Ä—å –ª—é–±—ã–µ –Ω–µ–∑–Ω–∞–∫–æ–º—ã–µ/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ area –Ω–µ —É—Ä–æ–Ω—è—Ç UI ‚Äî –æ—Ç—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∫–∞–∫ ¬´–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è¬ª —Å –∏–∫–æ–Ω–∫–æ–π generic.

‚∏ª

2) (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü–æ–¥—á–∏—Å—Ç–∏—Ç—å backend

–ï—Å–ª–∏ –ø—Ä–∞–≤–∏—à—å —Å–µ—Ä–≤–µ—Ä: –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–æ—Ä–º–∞–ª–∏–∑—É–π –æ–±–ª–∞—Å—Ç–∏, —á—Ç–æ–±—ã —Ñ—Ä–æ–Ω—Ç –º–µ–Ω—å—à–µ –≥–∞–¥–∞–ª:

function normalizeAreaServer(a?: string): 'hook'|'structure'|'emotional'|'cta'|'pacing'|'generic' {
  const key = (a || '').toLowerCase();
  const map = { emotion:'emotional', emotions:'emotional', tempo:'pacing', speed:'pacing', overall:'generic' } as const;
  if (['hook','structure','emotional','cta','pacing'].includes(key)) return key as any;
  return (map as any)[key] ?? 'generic';
}


‚∏ª

–ü–æ—á–µ–º—É —Å–ª—É—á–∏–ª–æ—Å—å —Å–µ–π—á–∞—Å

–ú—ã –Ω–µ–¥–∞–≤–Ω–æ ¬´—Ä–∞—Å—à–∏—Ä–∏–ª–∏¬ª –æ–±–ª–∞—Å—Ç–∏ (–¥–æ–±–∞–≤–∏–ª–∏ pacing/critical) –∏/–∏–ª–∏ –±—ç–∫–µ–Ω–¥ –Ω–∞—á–∞–ª –æ—Ç–¥–∞–≤–∞—Ç—å emotion –≤–º–µ—Å—Ç–æ emotional. –§—Ä–æ–Ω—Ç –æ–∂–∏–¥–∞–ª —Å—Ç—Ä–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏ –ø–∞–¥–∞–ª –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏.

–ü–æ—Å–ª–µ —Ñ–∏–∫—Å–∞:
	‚Ä¢	–æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–Ω–µ—Ç,
	‚Ä¢	–Ω–µ–∑–Ω–∞–∫–æ–º—ã–µ –æ–±–ª–∞—Å—Ç–∏ –±—É–¥—É—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è,
	‚Ä¢	–ø—Ä–∏–µ–¥–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –±–µ–π–¥–∂/–∏–∫–æ–Ω–∫–∞/–ø–æ–¥–ø–∏—Å—å.

–ù–∞–∂–º–∏ Esc —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å overlay, –ø—Ä–∏–º–µ–Ω—è–π –ø–∞—Ç—á, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ –ø—Ä–µ–≤—å—é –∏ —Å–Ω–æ–≤–∞ ¬´–ê–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è¬ª. –ï—Å–ª–∏ –µ—â—ë –≥–¥–µ-—Ç–æ –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç ‚Äî –ø—Ä–∏—à–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ rec.area –∏–∑ –∫–æ–Ω—Å–æ–ª–∏, –¥–æ–±–∞–≤–∏–º –≤ –∞–ª–∏–∞—Å—ã –∑–∞ –º–∏–Ω—É—Ç—É.