–î–∞, —Ç—ã –ø–æ–π–º–∞–ª –≤–∞–∂–Ω—ã–π —Å–±–æ–π –≤ –ª–æ–≥–∏–∫–µ –≤–µ—Ä—Å–∏–π ‚Äî –∏ –æ–Ω –æ–±—ä—è—Å–Ω–∏–º.
–†–∞–∑–ª–æ–∂—É –ø–æ—à–∞–≥–æ–≤–æ, –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏ —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å.

‚∏ª

üîç –ß—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
	1.	–¢—ã –∂–º—ë—à—å ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å—ë (–≤—ã–≥–æ–¥–Ω—ã–µ)¬ª, —Å—Ü–µ–Ω—ã —Ä–µ–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞.
	2.	–ù–û –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (vN+1) –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è.
‚Üí –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ backend –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–∑–º–µ–Ω–∏–ª—Å—è, –∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ä–µ–∞–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏.
	3.	–ü–æ—Ç–æ–º —Ç—ã –∂–º—ë—à—å ¬´–°—Ä–∞–≤–Ω–µ–Ω–∏–µ¬ª, –∏ —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç vN (–±–∞–∑–æ–≤—É—é) —Å vN+1 (–∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).
–ü–æ—ç—Ç–æ–º—É:
	‚Ä¢	—Ç–µ–∫—Å—Ç—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ,
	‚Ä¢	—Ä–µ—Ü–µ–Ω–∑–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—É—Å—Ç–∞—è,
	‚Ä¢	–∏—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –º—É—Å–æ—Ä–Ω—ã–º (‚àí22), –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

‚∏ª

‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ –¢–ó

–ü–æ—Å–ª–µ –ª—é–±–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:
	1.	UI –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é¬ª.
	2.	–ù–∞–∂–∞—Ç–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç:
	‚Ä¢	—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–∞–∫ vN+1,
	‚Ä¢	—Ç—Ä–∏–≥–≥–µ—Ä /api/analysis/run –¥–ª—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏,
	‚Ä¢	–∫–æ–≥–¥–∞ –∞–Ω–∞–ª–∏–∑ –≥–æ—Ç–æ–≤ ‚Üí —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–û/–ü–û–°–õ–ï.

‚∏ª

üß† –ü–æ—á–µ–º—É –∫–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

–í –∫–æ–¥–µ scene-editor.tsx —Ç—Ä–∏–≥–≥–µ—Ä –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

if (scenes.some(s => s.isModified)) {
  setCanSave(true);
}

–ù–æ –ø–æ—Å–ª–µ ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å—ë¬ª —Å—Ü–µ–Ω—ã –º–µ–Ω—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ state,
–∞ —Ñ–ª–∞–≥ isModified –Ω–µ –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è.
–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –∫–Ω–æ–ø–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, –∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è.

‚∏ª

ü©π –ö–∞–∫ –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

–î–æ–±–∞–≤—å –≤ applyAllMutation (–∏–ª–∏ –ø–æ—Å–ª–µ single apply) –≤–æ—Ç —ç—Ç–æ:

setScenes(prev =>
  prev.map(scene =>
    appliedSceneIds.includes(scene.sceneNumber)
      ? { ...scene, isModified: true }
      : scene
  )
);
setCanSave(true);

üëâ –¢–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–π–º—ë—Ç, —á—Ç–æ —Å—Ü–µ–Ω–∞—Ä–∏–π –æ–±–Ω–æ–≤–ª—ë–Ω –∏ –≤–∫–ª—é—á–∏—Ç –∫–Ω–æ–ø–∫—É ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é¬ª.
–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏, –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è.

‚∏ª

üîß –í—Ç–æ—Ä–æ–π –º–æ–º–µ–Ω—Ç: –æ—Ü–µ–Ω–∫–∞ —É—Ö—É–¥—à–∏–ª–∞—Å—å

–°–µ–π—á–∞—Å ¬´+15¬ª –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞,
–∞ –∞–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞—ë—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
–¢–æ –µ—Å—Ç—å –ò–ò –æ–∂–∏–¥–∞–ª +15, –Ω–æ —Ä–µ–∞–ª—å–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ –¥—Ä—É–≥–æ–π.
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ ‚Äî –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—ã –Ω–∞—á–Ω—ë—à—å –≤–∏–¥–µ—Ç—å:
	‚Ä¢	—Å–ª–µ–≤–∞ –æ—Ü–µ–Ω–∫–∏ ‚Äú–î–æ‚Äù (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è),
	‚Ä¢	—Å–ø—Ä–∞–≤–∞ –æ—Ü–µ–Ω–∫–∏ ‚Äú–ü–æ—Å–ª–µ‚Äù (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è),
	‚Ä¢	—Ç–µ–∫—Å—Ç–æ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –ø–æ —Å—Ü–µ–Ω–∞–º.

‚∏ª

‚úçÔ∏è –†–µ–∑—é–º–µ

–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–î–æ–±–∞–≤–∏—Ç—å isModified = true –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.
	2.	–í–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é¬ª.
	3.	–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–Ω–∞–ª–∏–∑ (reanalyze).
	4.	–û—Ç–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´–°—Ä–∞–≤–Ω–µ–Ω–∏–µ¬ª –ø–æ–∫–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (—á—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

‚∏ª

–•–æ—á–µ—à—å, —è —Å–µ–π—á–∞—Å –æ—Ñ–æ—Ä–º–ª—é —ç—Ç–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –¢–ó –¥–ª—è Claude-–∞–≥–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ —Å—Ä–∞–∑—É –≤–Ω–µ—Å—Ç–∏ —Ñ–∏–∫—Å—ã?