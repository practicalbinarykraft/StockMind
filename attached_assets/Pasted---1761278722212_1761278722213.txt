–æ–∫, –¥–µ–ª–∞–µ–º –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ ¬´–∫–∏–ª–ª–µ—Ä —Ñ–∏—á—É¬ª. –Ω–∏–∂–µ ‚Äî –ø—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ + –±—ã—Å—Ç—Ä—ã–µ —Ñ–∏–∫—Å—ã –ø–æ –º–æ–¥–µ–ª—è–º, —á—Ç–æ–±—ã –∞–≥–µ–Ω—Ç –Ω–µ —Ç—É–ø–∏–ª.

üéØ –ß—Ç–æ —Å—Ç—Ä–æ–∏–º

–ï–¥–∏–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞, –≥–¥–µ:
	‚Ä¢	–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏—Ç–∏–∫ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–ø–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –µ–≥–æ —Ä–∏–ª—Å–æ–≤ –∏ —É—á–∏—Ç—Å—è –ø–æ–¥ –µ–≥–æ –Ω–∏—à—É.
	‚Ä¢	–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –æ—Ü–µ–Ω–∏–≤–∞—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã (—Ö—É–∫, —Å—Ü–µ–Ω–∞—Ä–∏–π, –≤–∏–∑—É–∞–ª, —Ç–∞–π–º–∏–Ω–≥, –ø–æ–ª–∏—Ç–∏–∫–∞/—Ä–∏—Å–∫–∏, –æ–±–ª–æ–∂–∫–∞, —Ö—ç—à—Ç–µ–≥–∏).
	‚Ä¢	–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä (–≥–ª–æ–±–∞–ª—å–Ω—ã–π) –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –≤—ã–¥–∞—ë—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã/—à–∞–±–ª–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç—Å—è –≤ –±—É–¥—É—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã.

–í—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤ –Ω–æ–≤—ã–π Studio Workflow –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

‚∏ª

üß© –ú–æ–¥—É–ª–∏ –≤ Studio Workflow (–¥–æ–±–∞–≤–ª—è–µ–º 3 —à–∞–≥–∞)
	1.	publish (—É –≤–∞—Å —É–∂–µ –≤ –ø–ª–∞–Ω–µ) ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π URL/ID –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
	2.	post_publish_ingest (–Ω–æ–≤—ã–π) ‚Üí —Ç—è–Ω–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ Instagram Graph API.
	3.	analytics_agents (–Ω–æ–≤—ã–π) ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—á–∫—É –∞–≥–µ–Ω—Ç–æ–≤-–æ—Ü–µ–Ω—â–∏–∫–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤—ã–≤–æ–¥.
	4.	architect_review (–Ω–æ–≤—ã–π) ‚Üí –≥–ª–æ–±–∞–ª—å–Ω—ã–π ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä¬ª –¥–∞—ë—Ç —Å–≤–æ–¥–∫—É + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø—É—à–∏—Ç ¬´–ª–µ–∫–∞–ª–æ¬ª –≤ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.

–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –∞–≥–µ–Ω—Ç ¬´–ø–∞–¥–∞–µ—Ç¬ª ‚Äî –º–æ–¥—É–ª—å –¥–µ–≥—Ä–∞–¥–∏—Ä—É–µ—Ç, –Ω–æ –≤–µ—Å—å –≤–æ—Ä–∫—Ñ–ª–æ—É –Ω–µ —Å—Ç–æ–ø–∏—Ç—Å—è.

‚∏ª

üïµÔ∏è –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å):
	‚Ä¢	HookRater ‚Äî –∫–∞—á–µ—Å—Ç–≤–æ —Ö—É–∫–∞ (–ø–µ—Ä–≤—ã–µ 3‚Äì5 —Å–µ–∫—É–Ω–¥): –Ω–æ–≤–∏–∑–Ω–∞, –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –æ–±–µ—â–∞–Ω–∏–µ –≤—ã–≥–æ–¥—ã.
	‚Ä¢	StructureRater ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: hook‚Üíbody‚Üícta, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Å–º—ã—Å–ª–æ–≤—ã—Ö ¬´–±–∏—Ç–æ–≤¬ª, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–∏—Å–∞–Ω–∏–π.
	‚Ä¢	Visual/B-roll Matcher ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –≤–∏–∑—É–∞–ª–∞ (–º–æ–∂–Ω–æ –±–µ–∑ —Ç—è–∂—ë–ª–æ–≥–æ CV: –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã + CLIP/BLIP-2 –¥–ª—è —Ç–µ–≥–æ–≤; –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 3‚Äì5 –∫–∞–¥—Ä–æ–≤/—Å—Ü–µ–Ω–∞).
	‚Ä¢	Timing & Pacing ‚Äî —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ —Å—Ü–µ–Ω, cut rate, ¬´—Ç–∏—à–∏–Ω–∞¬ª > 1.2—Å, –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤/–∫—Ä—É–ø–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–æ–≤ (—ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ –∞—É–¥–∏–æ—Å–ø–µ–∫—Ç—Ä—É + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–Ω—Ç–∞–∂–∞).
	‚Ä¢	Policy/Risk ‚Äî —Ä–∏—Å–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (—É–ø–æ–º–∏–Ω–∞–Ω–∏—è, –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ç–µ–º—ã/—Å–ª–æ–≤–∞).
	‚Ä¢	Cover/SEO ‚Äî –æ–±–ª–æ–∂–∫–∞ –∏ –ø–æ–¥–ø–∏—Å—å (—á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –ª–∏—Ü–æ/–∫—Ä—É–ø–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ–Ω—Ç—Ä–∞—Å—Ç; —Ö—ç—à—Ç–µ–≥–∏/–∫–ª—é—á–µ–≤–∏–∫–∏).
	‚Ä¢	Retention Explainer ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—Ç–µ–Ω—à–Ω-–∫—Ä–∏–≤–æ–π: –≥–¥–µ ¬´–ø—Ä–æ–≤–∞–ª—ã¬ª, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–±–∏–≤–∞—é—Ç —É–¥–µ—Ä–∂–∞–Ω–∏–µ.

–ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –ø–∏—à–µ—Ç ¬´score + –ø—Ä–∏—á–∏–Ω—ã + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ + —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã¬ª.

‚∏ª

üîå –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
	‚Ä¢	Apify –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ä–∏–ª—Å–æ–≤ –±–ª–æ–≥–µ—Ä–æ–≤ (–≤–∞—à –º–æ–¥—É–ª—å —É–∂–µ –µ—Å—Ç—å: + —Ä–µ—Ç—Ä–∞–∏, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è).
	‚Ä¢	–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —Ä–∏–ª—Å–æ–≤ (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—É—Ç—å; —Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç + —Ç–∞–π–º–∫–æ–¥—ã).
	‚Ä¢	Instagram Graph API (–ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º):
	‚Ä¢	–í—ã—Ç—è–≥–∏–≤–∞–µ–º: plays, reach, avg_watch_time, retention_curve (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ), shares, saves, comments, profile_visits.
	‚Ä¢	–•—Ä–∞–Ω–∏–º –∫–∞–∫ —Ç–∞–π–º—Å–µ—Ä–∏–∏ + snapshot (–¥–ª—è –¥–µ–ª—å—Ç –ø–æ –¥–Ω—è–º).

‚∏ª

üóÑÔ∏è –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö (Postgres + pgvector)
	‚Ä¢	studio_reels (id, user_id, workflow_id, ig_media_id, source_kind, script_json, scenes_json, published_url, published_at).
	‚Ä¢	ig_metrics_daily (reel_id, date, plays, reach, avg_watch_time, completion_rate, shares, saves, comments, ‚Ä¶).
	‚Ä¢	agent_findings (reel_id, agent_name, score, payload_json, version, created_at).
	‚Ä¢	recommendations (reel_id, target=‚Äònext_script‚Äô|‚Äòcover‚Äô|‚Ä¶, payload_json, priority, created_at).
	‚Ä¢	user_profile_analytics (user_id, persona_json, style_guides_json, do/dont list, updated_at).
	‚Ä¢	global_patterns (pattern_id, title, description, examples, segments[], lift_estimate, updated_at).
	‚Ä¢	script_snippets (id, vector embedding, text, tags[], success_delta, source_reel_id) ‚Äî –¥–ª—è RAG –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏.
	‚Ä¢	model_registry (provider, friendly_name, provider_model_id, status, updated_at) ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ.

‚∏ª

ü§ñ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏—Ç–∏–∫ (per-user)

–î–µ—Ä–∂–∏—Ç:
	‚Ä¢	¬´–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—Ö–∞¬ª: —Ç–µ–º–ø—ã, —Ç–∏–ø—ã —Ö—É–∫–æ–≤, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ü–µ–Ω, –∫–æ–Ω–≤–µ—Ä—Å–∏—è CTA.
	‚Ä¢	–õ–µ–∫—Å–∏–∫–æ–Ω/—Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∞ –±—Ä–µ–Ω–¥–∞.
	‚Ä¢	–ü—É–ª –ª—É—á—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö ¬´—Å–Ω–∏–ø–ø–µ—Ç–æ–≤¬ª (RAG).
–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –∂—ë—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´hook ‚â§ 3.0s, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–π –∑–∞–ª–æ–≥, –≤—Å–µ–≥–¥–∞ 1 –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ –≤ –ø–µ—Ä–≤–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏¬ª).

‚∏ª

üß† –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä
	‚Ä¢	–£–º–µ–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å ¬´—á—Ç–æ –∑–∞—Ö–æ–¥–∏—Ç –≤ —Ü–µ–ª–æ–º¬ª: –ø–æ –Ω–∏—à–µ/—è–∑—ã–∫—É/–¥–ª–∏–Ω–µ.
	‚Ä¢	–ì–µ–Ω–µ—Ä–∏—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã (Hook pattern, Narrative pattern, CTA frames) —Å –æ—Ü–µ–Ω–∫–æ–π lift.
	‚Ä¢	–ü—É—à–∏—Ç —ç—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ –ø–æ–¥—Å–∫–∞–∑–∫–∏ ¬´Script¬ª-–º–æ–¥—É–ª—è (—á–µ—Ä–µ–∑ RAG –∏ —è–≤–Ω—ã–µ —á–µ–∫-–ª–∏—Å—Ç—ã).
	‚Ä¢	–£–ø—Ä–∞–≤–ª—è–µ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏ (A/B/C) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ö—É–∫–∞; —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç, –∫–∞–∫–æ–π –ø–æ–±–µ–¥–∏–ª.

‚∏ª

üîÅ –û–±—É—á–µ–Ω–∏–µ –∏ —É–ª—É—á—à–µ–Ω–∏–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
	‚Ä¢	RAG-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞: ¬´–ª—É—á—à–∏–µ —Å—Ü–µ–Ω—ã/—Ö—É–∫–∏¬ª ‚Üí —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (text-embedding-3-large / GTE-large), –ø–æ–∏—Å–∫ –ø–æ –Ω–∏—à–µ –∏ –º–µ—Ç—Ä–∏–∫–∞–º.
	‚Ä¢	Bandit-–ª–æ–≥–∏–∫–∞: –º—É–ª—å—Ç–∏-–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ö—É–∫–æ–≤/–æ–±–ª–æ–∂–µ–∫ ‚Üí –≤—ã–±–∏—Ä–∞–µ–º —á–∞—â–µ –≤—ã–∏–≥—Ä—ã—à–Ω—ã–µ.
	‚Ä¢	Light-finetune: –º–µ–ª–∫–∏–µ LoRA/PEFT –¥–ª—è ¬´—Ç–æ–Ω–∫–æ–π —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∏¬ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ; —Ö—Ä–∞–Ω–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã per-tenant).
	‚Ä¢	Feedback-–ø–µ—Ç–ª—è: –∞–≥–µ–Ω—Ç –æ–±—ä—è—Å–Ω—è–µ—Ç ¬´–ø–æ—á–µ–º—É¬ª –∏ —Ç—ç–≥–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ ‚Üí —ç—Ç–∏ —Ç—ç–≥–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ñ–∏—á–∞–º–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

‚∏ª

üîê –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
	‚Ä¢	¬´–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ¬ª –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –≤ —Å–≤–æ—ë–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ; –≥–ª–æ–±–∞–ª—å–Ω—ã–π ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä¬ª –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏/—à—Ç—É–∫–∏ –±–µ–∑ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (k-–∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å, –º–∏–Ω–∏–º—É–º —Å—Ç–æ–ª–±—Ü–æ–≤).
	‚Ä¢	–¢—É–º–±–ª–µ—Ä: ¬´—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤ –æ–±—â–∏–π –ø—É–ª¬ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ, –Ω–æ —Å –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π).

‚∏ª

üõ†Ô∏è –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤ –≤–∞—à –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

–î–æ–±–∞–≤—å—Ç–µ —É–∑–ª—ã DAG:
	‚Ä¢	post_publish_ingest (required: true, deps: [‚Äòpublish‚Äô])
	‚Ä¢	analytics_agents (required: false, deps: [‚Äòpost_publish_ingest‚Äô])
	‚Ä¢	architect_review (required: false, deps: [‚Äòanalytics_agents‚Äô])
–ï—Å–ª–∏ Instagram API –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí post_publish_ingest —Å—Ç–∞–≤–∏—Ç running + –ø–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ backoff; —á–µ—Ä–µ–∑ 24h ‚Äî skipped —Å –ø–æ–º–µ—Ç–∫–æ–π, –∏ —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥—É–ª–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —á–∞—Å—Ç–∏—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º.

‚∏ª

üì° API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–º–∏–Ω–∏–º—É–º)
	‚Ä¢	POST /api/studio/reels/:id/ingest/instagram ‚Äî —Ä—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä –¥–æ–æ–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏.
	‚Ä¢	GET /api/studio/reels/:id/analytics ‚Äî —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë: –º–µ—Ç—Ä–∏–∫–∏ + –≤—ã–≤–æ–¥ –∞–≥–µ–Ω—Ç–æ–≤ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
	‚Ä¢	POST /api/studio/reels/:id/experiments ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã (hook A/B/C).
	‚Ä¢	POST /api/studio/reels/:id/outcome ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã (–µ—Å–ª–∏ —Ç—è–Ω–µ–º –Ω–µ –ø–æ API).
	‚Ä¢	GET /api/studio/patterns ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞¬ª.

‚∏ª

üß™ –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
	‚Ä¢	Primary: avg watch time, completion rate, shares/save rate.
	‚Ä¢	Proxy: 3-—Å–µ–∫ —É–¥–µ—Ä–∂–∞–Ω–∏–µ, % ¬´–∫—Ä–∞—Å–Ω—ã—Ö –∑–æ–Ω¬ª –≤ —Å—Ü–µ–Ω–∞—Ö (–ø–∞—É–∑—ã, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–∏–∑—É–∞–ª–∞), density bits/min.
	‚Ä¢	Uplift: delta –∫ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –±–∞–∑–µ/–≥–ª–æ–±–∞–ª—å–Ω–æ–π –Ω–∏—à–µ.
	‚Ä¢	Explainers: top-3 –ø—Ä–∏—á–∏–Ω—ã –ø–∞–¥–µ–Ω–∏—è —É–¥–µ—Ä–∂–∞–Ω–∏—è (–∞–≥–µ–Ω—Ç –¥–∞—ë—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è + —Ç–∞–π–º—Å—Ç–∞–º–ø—ã).

‚∏ª

üöí –°—Ä–æ—á–Ω—ã–π —Ñ–∏–∫—Å –ø–æ –º–æ–¥–µ–ª—è–º (–∏–∑-–∑–∞ ¬´claude-opus-4¬ª)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ–º –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏, –±–ª–æ–∫–∏—Ä—É–µ–º –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–µ–Ω–∞ –∏ –¥–∞—ë–º ¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ¬ª –∞–ª–∏–∞—Å—ã.

// server/llm/model-registry.ts
export type Provider = 'anthropic'|'openai'|'google';
export type Friendly =
  | 'sonnet-latest'    // Anthropic
  | 'haiku-latest'
  | 'gpt-4o-mini'
  | 'gpt-4.1'
  | 'gemini-1.5-pro'
  | 'gemini-1.5-flash';

const MAP: Record<Provider, Record<Friendly, string>> = {
  anthropic: {
    'sonnet-latest': 'claude-3-5-sonnet-20240620',
    'haiku-latest' : 'claude-3-haiku-20240307',
  },
  openai: {
    'gpt-4o-mini'  : 'gpt-4o-mini',
    'gpt-4.1'      : 'gpt-4.1',
  },
  google: {
    'gemini-1.5-pro'  : 'gemini-1.5-pro',
    'gemini-1.5-flash': 'gemini-1.5-flash',
  },
};

export function resolveModel(p: Provider, name: Friendly): string {
  const id = MAP[p]?.[name];
  if (!id) throw new Error(`Model alias not allowed: ${p}:${name}`);
  return id;
}

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è Anthropic (–∏ —Ñ–∏–∫—Å–∞ ¬´opus/4-5¬ª –ø—É—Ç–∞–Ω–∏—Ü—ã):

// server/llm/anthropic.ts
import Anthropic from '@anthropic-ai/sdk';
import { resolveModel } from './model-registry';

export async function callAnthropic({
  apiKey, prompt, alias = 'sonnet-latest' as const,
}: { apiKey: string; prompt: string; alias?: 'sonnet-latest'|'haiku-latest' }) {
  const client = new Anthropic({ apiKey });
  const model = resolveModel('anthropic', alias);

  const msg = await client.messages.create({
    model,
    max_tokens: 1024,
    messages: [{ role: 'user', content: prompt }],
  });

  const text = msg.content.find(c => c.type === 'text')?.text;
  if (!text) throw new Error('No text in response');
  return text;
}

–°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–ø—É—Å–∫–µ:

// server/llm/health.ts
export function assertModelsConfigured() {
  const required = [
    ['anthropic','sonnet-latest'],
    ['openai','gpt-4o-mini'],
  ] as const;
  required.forEach(([p,a]) => resolveModel(p as any, a as any));
  console.log('[LLM] Model registry OK');
}

–¢–∞–∫ –º—ã –∏—Å–∫–ª—é—á–∞–µ–º ¬´claude-opus-4¬ª, ¬´claude-sonnet-4-5¬ª –∏ –ª—é–±—ã–µ —Ñ–∞–Ω—Ç–∞–∑–∏–∏. –í UI/–∫–æ–Ω—Ñ–∏–≥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–ª–∏–∞—Å—ã.

‚∏ª

üß∑ –ë—ã—Å—Ç—Ä—ã–π —Ç–∞—Å–∫-–ª–∏—Å—Ç –Ω–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
	1.	–°—Ö–µ–º–∞ –ë–î: —Ç–∞–±–ª–∏—Ü—ã ig_metrics_daily, agent_findings, recommendations, global_patterns, script_snippets, model_registry.
	2.	–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è IG API: —Å–µ—Ä–≤–∏—Å instagram.ts (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø–æ media_id).
	3.	DAG: –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª–∏ post_publish_ingest, analytics_agents, architect_review (optional, –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç).
	4.	–ê–≥–µ–Ω—Ç—ã: –Ω–∞—á–∞—Ç—å —Å HookRater + StructureRater + Cover/SEO; –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –ø–æ—Ç–æ–º.
	5.	RAG: script_snippets + pgvector –∏–Ω–¥–µ–∫—Å; –ø–æ–ø–æ–ª–Ω—è—Ç—å –ª—É—á—à–∏–º–∏ –∫–µ–π—Å–∞–º–∏.
	6.	Model Registry: –≤–≤–µ—Å—Ç–∏ resolveModel(), –≤—ã–∫–∏–Ω—É—Ç—å –ø—Ä—è–º—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–æ–¥–µ–ª–µ–π.
	7.	UI: –≤ Studio ‚Üí –≤–∫–ª–∞–¥–∫–∞ ¬´–ê–Ω–∞–ª–∏—Ç–∏–∫–∞¬ª: –º–µ—Ç—Ä–∏–∫–∏, —Ç–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Å—Ü–µ–Ω, ¬´—Ç—Ä–∏ –ø—Ä–∏—á–∏–Ω—ã –ø–∞–¥–µ–Ω–∏—è —É–¥–µ—Ä–∂–∞–Ω–∏—è¬ª, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
	8.	–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã: –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å multi-hook A/B –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ outcome.
	9.	–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–∞—à–±–æ—Ä–¥ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –ø–µ—Ä–≤–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, % –ø—Ä–∏—Ä–æ—Å—Ç–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è.

‚∏ª

üó∫Ô∏è –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (2 –Ω–µ–¥–µ–ª–∏)

–ù–µ–¥–µ–ª—è 1
	‚Ä¢	DB + Instagram ingest + Model Registry.
	‚Ä¢	HookRater/StructureRater + Architect (MVP).
	‚Ä¢	UI ¬´–ê–Ω–∞–ª–∏—Ç–∏–∫–∞¬ª (–º–µ—Ç—Ä–∏–∫–∏ + —Ç–µ–∫—Å—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏).

–ù–µ–¥–µ–ª—è 2
	‚Ä¢	Cover/SEO –∞–≥–µ–Ω—Ç + RAG-—Å–Ω–∏–ø–ø–µ—Ç—ã.
	‚Ä¢	–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã (hook A/B).
	‚Ä¢	–í–∏–∑—É–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç (–∫–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã + CLIP) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.
	‚Ä¢	–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã.

‚∏ª

—Ö–æ—á–µ—à—å ‚Äî —Å–¥–µ–ª–∞—é –¥–ª—è —Ç–µ–±—è:
	‚Ä¢	–º–∏–≥—Ä–∞—Ü–∏–∏ .sql (–≤—Å–µ –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã),
	‚Ä¢	–∫–∞—Ä–∫–∞—Å –º–æ–¥—É–ª–µ–π post_publish_ingest / analytics_agents / architect_review,
	‚Ä¢	—Å–µ—Ä–≤–∏—Å instagram.ts (Graph API),
	‚Ä¢	–∏ –ø–∞—Ç—á model-registry + –ø—Ä–∞–≤–∫–∏ –º–µ—Å—Ç, –≥–¥–µ —É –≤–∞—Å —Å–µ–π—á–∞—Å —Å—Ç—Ä–æ–∫–∏ –º–æ–¥–µ–ª–µ–π.