–û—Ç–ª–∏—á–Ω–æ üí• ‚Äî –≤–æ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –∏ —á—ë—Ç–∫–æ–µ –¢–ó –¥–ª—è Replit, –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –∞–≥–µ–Ω—Ç—ã –ø–æ–Ω–∏–º–∞—é—Ç (—Å –∞–∫—Ü–µ–Ω—Ç–æ–º —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è, –±–µ–∑ –º–æ–¥–∞–ª–∫–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è).

‚∏ª

üß© TASK: Restore Deep AI Script Analysis with Scene-Level Recommendations and Architect Review

üéØ Goal

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è (Stage 3: AI Analysis) —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã –∏ —Ä–µ—Ü–µ–Ω–∑–∏–µ–π AI-–∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞.
–¶–µ–ª—å ‚Äî —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è –º–æ–≥ –Ω–∞–∂–∞—Ç—å ‚Äú–ê–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è‚Äù –∏ –ø–æ–ª—É—á–∏—Ç—å:
	‚Ä¢	–±–∞–ª–ª—ã –ø–æ –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω–µ,
	‚Ä¢	–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è, gain –ø–æ–∏–Ω—Ç—ã),
	‚Ä¢	–æ–±—â—É—é –æ—Ü–µ–Ω–∫—É —Å breakdown –∏ —Ä–µ—Ü–µ–Ω–∑–∏–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞.

‚∏ª

‚öôÔ∏è BACKEND CHANGES (server/routes.ts + ai-service.ts)

1. –†–∞—Å—à–∏—Ä–∏—Ç—å endpoint /api/projects/:id/analysis/run

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞:

‚úÖ –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:

{
  "success": true,
  "score": 76,
  "breakdown": {
    "hook": 82,
    "structure": 71,
    "emotion": 69,
    "cta": 73
  },
  "architectReview": {
    "summary": "–•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–æ —Å–ª–∞–±—ã–π CTA –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å.",
    "strengths": [
      "–ß—ë—Ç–∫–∏–π —Ç–µ–º–ø –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è",
      "–°–∏–ª—å–Ω–∞—è –ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
    ],
    "weaknesses": [
      "–°–ª–∞–±–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ",
      "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç"
    ],
    "forecast": {
      "retention": "58-68%",
      "saves": "2-4%",
      "shares": "1.5-3%"
    }
  },
  "scenes": [
    {
      "id": 1,
      "title": "–°—Ü–µ–Ω–∞ 1",
      "text": "–†–æ–±–æ—Ç –ø–æ–∫–∞–∑–∞–ª —Å—Ä–µ–¥–Ω–∏–π –ø–∞–ª–µ—Ü...",
      "score": 78,
      "recommendations": [
        {
          "type": "Hook",
          "severity": "High",
          "current": "–†–æ–±–æ—Ç –ø–æ–∫–∞–∑–∞–ª —Å—Ä–µ–¥–Ω–∏–π –ø–∞–ª–µ—Ü...",
          "suggestion": "–ù–∞—á–Ω–∏—Ç–µ —Å –≤–æ–ø—Ä–æ—Å–∞, –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ.",
          "rationale": "–ü—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö—É–∫ –≤–æ–≤–ª–µ–∫–∞–µ—Ç –∑—Ä–∏—Ç–µ–ª—è —Å –ø–µ—Ä–≤—ã—Ö —Å–µ–∫—É–Ω–¥.",
          "impact": "+12 points"
        }
      ]
    }
  ]
}

üîπ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
	‚Ä¢	–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É aiAnalysis.run(),
–¥–æ–±–∞–≤–∏—Ç—å:

result.scenes = await aiAnalysis.analyzeScenes(project.text);
result.architectReview = await aiAnalysis.generateReview(result);


	‚Ä¢	–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ analyzeScenes() –≤—ã–∑—ã–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤:
	‚Ä¢	hookAnalyzer
	‚Ä¢	structureAnalyzer
	‚Ä¢	emotionAnalyzer
	‚Ä¢	ctaAnalyzer
	‚Ä¢	–ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ recommendations[] –¥–ª—è —Å–≤–æ–µ–π –∑–æ–Ω—ã.

‚∏ª

2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
	‚Ä¢	–ï—Å–ª–∏ scenes –∏–ª–∏ architectReview –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã ‚Üí
–≤–µ—Ä–Ω—É—Ç—å 422:

{ "success": false, "code": "NO_SCENE_ANALYSIS", "message": "AI –Ω–µ –≤–µ—Ä–Ω—É–ª –∞–Ω–∞–ª–∏–∑ –ø–æ —Å—Ü–µ–Ω–∞–º" }


	‚Ä¢	Retry-–ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff (1 s ‚Üí 3 s ‚Üí 7 s).

‚∏ª

üß† FRONTEND CHANGES (client/components/project/scene-editor.tsx)

1. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–¥ –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω–æ–π

–ï—Å–ª–∏ scene.recommendations —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –±–ª–æ–∫:

‚úÖ –ù–æ–≤—ã–π –±–ª–æ–∫ –ø–æ–¥ —Å—Ü–µ–Ω–æ–π:

üß© –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ AI
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
CTA ‚Äî –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
–¢–µ–∫—É—â–∏–π:  –ò–Ω—Å–∞–π–¥–µ—Ä—ã –≥–æ–≤–æ—Ä—è—Ç: —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ...
–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:  –ò–Ω—Å–∞–π–¥–µ—Ä—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç: –º–∞—Å—Å–æ–≤—ã–π –∏—Å—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ ‚Äî —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –∂–∞—Ä–∫–æ.
–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –ü—Ä—è–º–æ–π –ø—Ä–∏–∑—ã–≤ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ–±—ã—Ç–∏—è–º–∏ –ø–æ–≤—ã—à–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å –∑—Ä–∏—Ç–µ–ª—è.
+14 points
[–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üîπ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ‚Äú–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é‚Äù
	‚Ä¢	–¢–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ suggestion
	‚Ä¢	–ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º —Ñ–æ–Ω–æ–º
	‚Ä¢	–í —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å—Ü–µ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç status: "modified"

‚∏ª

2. –ö–Ω–æ–ø–∫–∞ ‚Äú–£–ª—É—á—à–∏—Ç—å –≤—Å—ë‚Äù
	‚Ä¢	–ï—Å–ª–∏ ‚â• 2 —Å—Ü–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É —Å–ø—Ä–∞–≤–∞:
[‚ú® –£–ª—É—á—à–∏—Ç—å –≤—Å—ë (n)]
	‚Ä¢	–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:
	‚Ä¢	–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤—Å–µ suggestion –ø–æ–¥—Ä—è–¥.
	‚Ä¢	–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast:
"–í—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (+N –æ—á–∫–æ–≤). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é."

‚∏ª

3. –ü–∞–Ω–µ–ª—å ‚Äú–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞‚Äù

–û–±–Ω–æ–≤–∏—Ç—å –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å:

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–û–±—â–∏–π –±–∞–ª–ª: 66 / 100  (moderate)
Hook: 82   Structure: 71
Emotion: 69   CTA: 73
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–†–µ—Ü–µ–Ω–∑–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞
–•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–æ —Å–ª–∞–±—ã–π CTA.
‚Ä¢ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: —Ç–µ–º–ø, –ª–æ–≥–∏–∫–∞
‚Ä¢ –°–ª–∞–±—ã–µ: —Ñ–∏–Ω–∞–ª, —ç–º–æ—Ü–∏–∏
–ü—Ä–æ–≥–Ω–æ–∑:
Retention 58‚Äì68%, Saves 2‚Äì4%, Shares 1.5‚Äì3%


‚∏ª

üß© UI LOGIC FLOW
	1.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç ‚Äú–ê–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è‚Äù
	2.	Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç scenes[], breakdown, architectReview
	3.	–ü–æ–¥ –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω–æ–π –ø–æ—è–≤–ª—è—é—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
	4.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
	‚Ä¢	–ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–¥–Ω–æ–π,
	‚Ä¢	–Ω–∞–∂–∞—Ç—å ‚Äú–£–ª—É—á—à–∏—Ç—å –≤—Å—ë‚Äù
	5.	–ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ‚Äú–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é‚Äù
	6.	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Ä–µ–∞–Ω–∞–ª–∏–∑) –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
	7.	–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –±–∞–ª–ª—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

‚∏ª

‚úÖ Acceptance Criteria
	‚Ä¢	–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–∞–∂–¥–∞—è —Å—Ü–µ–Ω–∞ –∏–º–µ–µ—Ç score –∏ recommendations
	‚Ä¢	–ö–Ω–æ–ø–∫–∞ ‚Äú–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é‚Äù –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã
	‚Ä¢	–ö–Ω–æ–ø–∫–∞ ‚Äú–£–ª—É—á—à–∏—Ç—å –≤—Å—ë‚Äù –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ —Å–æ–≤–µ—Ç—ã —Ä–∞–∑–æ–º
	‚Ä¢	–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç architectReview –∏ breakdown
	‚Ä¢	–û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (422, 504 –∏ —Ç.–¥.)
	‚Ä¢	–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç (persist –≤ localStorage + DB)

‚∏ª

–•–æ—á–µ—à—å, —è –¥–æ–±–∞–≤–ª—é –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å –¢–ó –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ polish‚Äô–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (—Ü–≤–µ—Ç–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏, –∞–Ω–∏–º–∞—Ü–∏–∏, skeleton‚Äô—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∞–ª–∏–∑–∞)?