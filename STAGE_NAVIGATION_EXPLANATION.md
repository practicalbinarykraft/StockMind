# üîí –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏

## üìã –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (`project-sidebar.tsx`):
1. **–¢–æ–ª—å–∫–æ —ç—Ç–∞–ø—ã 5-8 –Ω–∞–≤–∏–≥–∏—Ä—É–µ–º—ã** (—Å—Ç—Ä–æ–∫–∞ 94-95)
   ```typescript
   if (stageNum < 5) return  // –ë–ª–æ–∫–∏—Ä—É–µ—Ç —ç—Ç–∞–ø—ã 1-4
   ```

2. **–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –±—É–¥—É—â–∏–µ —ç—Ç–∞–ø—ã** (—Å—Ç—Ä–æ–∫–∞ 98)
   ```typescript
   if (stageNum > currentStage) return  // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤–ø–µ—Ä–µ–¥
   ```

3. **–¢–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã** (—Å—Ç—Ä–æ–∫–∞ 153)
   ```typescript
   const isNavigable = stage.number >= 5 && (isCompleted || isActive) && !isActive
   ```

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (`projects.routes.ts`):
1. **–¢–æ–ª—å–∫–æ —ç—Ç–∞–ø—ã 5-8** (—Å—Ç—Ä–æ–∫–∞ 168)
   ```typescript
   if (typeof stage !== 'number' || stage < 5 || stage > 8) {
     return res.status(400).json({
       message: "Invalid stage. Only stages 5-8 can be navigated to."
     });
   }
   ```

2. **–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –±—É–¥—É—â–∏–µ —ç—Ç–∞–ø—ã** (—Å—Ç—Ä–æ–∫–∞ 179)
   ```typescript
   if (stage > currentProject.currentStage) {
     return res.status(400).json({
       message: "Cannot navigate to a locked stage. Complete previous stages first."
     });
   }
   ```

---

## ü§î –ó–∞—á–µ–º —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ?

### –ü—Ä–∏—á–∏–Ω—ã:

1. **–≠—Ç–∞–ø—ã 1-4 - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π workflow:**
   - Stage 1: Source Selection (–≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
   - Stage 2: Content Input (–≤–≤–æ–¥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
   - Stage 3: AI Analysis (–∞–Ω–∞–ª–∏–∑ –ò–ò)
   - Stage 4: Voice Generation (–æ–∑–≤—É—á–∫–∞)
   
   –≠—Ç–∏ —ç—Ç–∞–ø—ã **–¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.

2. **–≠—Ç–∞–ø—ã 5-8 - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ/—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ:**
   - Stage 5: Avatar Selection (–≤—ã–±–æ—Ä –∞–≤–∞—Ç–∞—Ä–∞)
   - Stage 6: Final Export (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç)
   - Stage 7: Storyboard (—Ä–∞—Å–∫–∞–¥—Ä–æ–≤–∫–∞)
   - Stage 8: Performance (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
   
   –≠—Ç–∏ —ç—Ç–∞–ø—ã **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã** –∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏.

3. **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö:**
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ —Ä–∞–Ω–Ω–∏–µ —ç—Ç–∞–ø—ã
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ò–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö:**
   - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ Stage 1 –º–æ–∂–µ—Ç —Å–±—Ä–æ—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
   - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ Stage 2 –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
   - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ Stage 3 –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –Ω–∞ Stage 1 –º–æ–∂–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ Stage 3
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ Stage 2 –º–æ–∂–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –æ–∑–≤—É—á–∫—É Stage 4

3. **UX –ø—Ä–æ–±–ª–µ–º—ã:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –≤ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   - –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å, –∞ —á—Ç–æ –Ω–µ—Ç

---

## ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã (1-8)
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –±—É–¥—É—â–∏–µ —ç—Ç–∞–ø—ã
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Ä–∞–Ω–Ω–∏–µ —ç—Ç–∞–ø—ã (1-4)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
- ‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å—Å—è

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (–±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã
2. –ù–∞ —ç—Ç–∞–ø–∞—Ö 1-4 –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (read-only)
3. –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –Ω–µ–ª—å–∑—è —Å–ª—É—á–∞–π–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —ç—Ç–∞–ø—ã
- ‚úÖ –Ø–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä"
- ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –£–±—Ä–∞—Ç—å –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
2. –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ –ª—é–±—ã–µ —ç—Ç–∞–ø—ã

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ü–ª–æ—Ö–æ–π UX

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç 1** —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º:

1. –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã (1-8)
2. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —ç—Ç–∞–ø—ã 1-4 –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:
   ```
   ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!
   
   –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å –Ω–∞ —Ä–∞–Ω–Ω–∏–π —ç—Ç–∞–ø. 
   –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã.
   
   [–û—Ç–º–µ–Ω–∞] [–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å]
   ```
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –±—É–¥—É—â–∏–µ —ç—Ç–∞–ø—ã

---

## üìù –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ö–ª–∏–µ–Ω—Ç:**
   - –£–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `stageNum < 5`
   - –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
   - –û–±–Ω–æ–≤–∏—Ç—å `isNavigable` –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤

2. **–°–µ—Ä–≤–µ—Ä:**
   - –£–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `stage < 5 || stage > 8`
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `stage <= currentStage`
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `project_steps`
   - –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Ä–∞–Ω–Ω–∏–π —ç—Ç–∞–ø –¥–∞–Ω–Ω—ã–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
   - –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏

